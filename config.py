# -*- coding: utf-8 -*-
"""
Конфигурационный файл проекта Clash Royale Bot
Содержит все основные настройки и константы
"""

import os


# ===== ПУТИ К ФАЙЛАМ И ПАПКАМ =====
# Путь к папке с обученной моделью YOLO
MODEL_PATH = os.path.join("models", "train_clash_royale_test5", "weights", "best.pt")

# Путь к файлу для сохранения координат выбранной области экрана
ROI_CONFIG_PATH = "roi_config.txt"


# ===== НАСТРОЙКИ ЗАХВАТА ЭКРАНА =====
# Количество кадров в секунду для обработки
# FPS = 0.25 → 1 кадр в 4 секунды (для тестирования)
# FPS = 0.5 → 1 кадр в 2 секунды (для тестирования)
# FPS = 4.0 → 4 кадра в секунду (рабочий режим после тестирования)
FPS = 2


# ===== НАСТРОЙКИ ОТЛАДКИ/ТЕСТИРОВАНИЯ =====
# Флаг для сохранения обработанных кадров с детекциями (для отладки)
DETECTION_TEST = True  # True - сохранять кадры, False - не сохранять
# Папка для сохранения обработанных кадров
DETECTION_OUTPUT_DIR = "detection"


# ===== НАСТРОЙКИ OVERLAY =====
# Доска (фоновая панель)
BOARD_WIDTH_PERCENT = 0.8  # ширина доски в % от ширины ROI
BOARD_HEIGHT_PERCENT = 0.085  # высота доски в % от высоты ROI
BOARD_COLOR = (240, 76, 76)  # цвет доски
BOARD_ALPHA = 0.5  # прозрачность доски

# Отступ и размер капельки эликсира
ELIXIR_DROP_INDENT_PERCENT = 0.01  # отступ в % от ширины ROI
ELIXIR_DROP_SIZE_PERCENT = 0.05  # размер капельки в % от ширины ROI

# Шкала эликсира
ELIXIR_BAR_WIDTH_PERCENT = 0.7  # ширина шкалы в % от ширины ROI
ELIXIR_BAR_HEIGHT_RATIO = 0.6  # высота шкалы в % от высоты капельки
ELIXIR_BAR_OFFSET_RATIO = 0.2  # отступ от капельки в % от высоты капельки

# Логика подсчета эликсира
ELIXIR_START_BALANCE = 6.5  # стартовый запас эликсира
ELIXIR_SPEED = 0.33  # скорость прироста (эликсир/сек)
ELIXIR_MAX = 10  # максимальное количество эликсира


# ===== НАСТРОЙКИ ДЛЯ YOLO ДЕТЕКЦИИ =====
# Минимальный порог уверенности для детекции объектов
YOLO_CONFIDENCE = 0.42
# Размер изображения для обработки моделью (ширина, высота)
YOLO_IMG_SIZE = 640


# ===== НАСТРОЙКИ ДЛЯ СОХРАНЕННЫХ ИЗОБРАЖЕНИЙ =====
# Цвет рамки при выборе области экрана (BGR формат для OpenCV)
SELECTION_COLOR = (64, 64, 64)  # Темно серый

# Толщина линии рамки при выборе области
SELECTION_THICKNESS = 2


# ===== ТЕКСТОВЫЕ СООБЩЕНИЯ =====
# Сообщения для пользователя на русском языке
MSG_SELECT_AREA = "Выделите область игры мышью и нажмите Enter. ESC для отмены."
MSG_AREA_SAVED = "Область сохранена: x={}, y={}, width={}, height={}"
MSG_AREA_LOADED = "Координаты области загружены из файла"
MSG_STARTING_CAPTURE = "Запуск захвата экрана..."
MSG_DETECTION_RESULT = "[{timestamp}] Обнаружено объектов: {count}"
MSG_OBJECT_DETECTED = "  - {class_name} (conf: {confidence:.2f})"
MSG_NO_MODEL = "ОШИБКА: Модель не найдена по пути: {}"
MSG_PRESS_Q_TO_QUIT = "Нажмите 'Ctrl+C' в терминале для остановки программы"
